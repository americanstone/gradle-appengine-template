//package as war
apply plugin: 'war'
//supply appengineRun, appengineUpdate, appengineStop tasks
apply plugin: 'appengine'

def appEmail  = "guojun.blue@gmail.com"

//check latest version https://cloud.google.com/appengine/downloads 
def appengineVersion = "1.9.22"

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "com.google.appengine:gradle-appengine-plugin:1.9.22"
    }
}

repositories {
    mavenCentral()
}

dependencies {
	appengineSdk "com.google.appengine:appengine-java-sdk:${appengineVersion}"
	compile "javax.servlet:servlet-api:2.5"
	compile "com.google.appengine:appengine-api-1.0-sdk:${appengineVersion}"
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.3'
}

/*DEPRECATED: Using client login (email + password) will NOT be supported
in future versions of appengine, use oauth2 instead
see https://github.com/GoogleCloudPlatform/gradle-appengine-plugin#oauth2

httpPort only for local server
*/
appengine {

    httpPort = 8080
    downloadSdk = true

    appcfg {
    
        email = "${appEmail}"
		noCookies = true
		oauth2 = true
    }
}
